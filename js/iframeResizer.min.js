/*! iFrame Resizer (iframeSizer.min.js ) - v4.3.9 - 2024-02-27
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2024 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
!function(a){if("undefined"==typeof window)return;const v="message".length,z="[iFrameSizer]",$=z.length,d=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),x={},l=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyPadding:null,checkOrigin:!0,direction:"vertical",inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"auto",id:"iFrameResizer",log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,offsetHeight:0,offsetWidth:0,postMessageTarget:null,sameDomain:!1,scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"auto",onClose:()=>!0,onClosed(){},onInit:!1,onMessage:null,onMouseEnter(){},onMouseLeave(){},onReady(e){"function"==typeof x[e.id].onInit&&(f(e.id,`
[31;1mDeprecated Option[m

The [1monInit()[m function is deprecated and has been replaced with [1monReady()[m. It will be removed in a future version of iFrame Resizer.
        `),x[e.id].onInit(e))},onResized(){},onScroll:()=>!0});let c=0,m=!1,I=null;const T=(e,i,n)=>e.addEventListener(i,n,!1),k=(e,i,n)=>e.removeEventListener(i,n,!1),n=e=>x[e]?x[e].log:m;const t=e=>{return`${z}[${e=e,window.top===window.self?"Host page: "+e:window?.parentIFrame?.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e}]`},o=(e,i,...n)=>console[e](t(i),...n),R=(e,...i)=>!0===n(e)?o("log",e,...i):null,F=(e,...i)=>o("info",e,...i),M=(e,...i)=>o("warn",e,...i),f=(e,i)=>{return window.console&&console.warn((e=e,i=[window.chrome?i:i.replaceAll(/\u001B\[[\d;]*m/gi,"")],[z+`[${e}]`,...i].join(" ")))};function i(i){function a(){e("Height"),e("Width"),C(g),H(h),u("onResized",g)}function e(e){var i=Number(x[h]["max"+e]),n=Number(x[h]["min"+e]),e=e.toLowerCase();let t=Number(g[e]);R(h,`Checking ${e} is in range ${n}-`+i),t<n&&(t=n,R(h,`Set ${e} to min value`)),t>i&&(t=i,R(h,`Set ${e} to max value`)),g[e]=""+t}function n(){const{origin:n,sameDomain:e}=i;if(e)return 1;let t=x[h]?.checkOrigin;if(t&&""+n!="null"&&!function(){if(t.constructor!==Array)return e=x[h]?.remoteHost,R(h,"Checking connection is from: "+e),n===e;{let e=0,i=!1;for(R(h,"Checking connection is from allowed list of origins: "+t);e<t.length;e++)if(t[e]===n){i=!0;break}return i}var e}())throw new Error(`Unexpected message received from: ${n} for ${g.iframe.id}. Message was: ${i.data}. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.`);return 1}function s(e){return o.slice(o.indexOf(":")+v+e)}const d=(e,i)=>{const n={};var t,o;t=function(){j(`Send Page Info (${e})`,"pageInfo:"+function(){var e=document.body.getBoundingClientRect(),i=g.iframe.getBoundingClientRect(),{scrollY:n,scrollX:t}=window,{scrollWidth:o,scrollHeight:r}=document.documentElement;return JSON.stringify({iframeHeight:i.height,iframeWidth:i.width,offsetTop:Math.floor(i.top-e.top),offsetLeft:Math.floor(i.left-e.left),scrollHeight:r,scrollWidth:o,scrollX:t,scrollY:n,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}(),i)},o=i,n[o]||(t(),n[o]=requestAnimationFrame(()=>{n[o]=null}))};function r(e){e=e.getBoundingClientRect();return W(h),{x:Math.floor(Number(e.left)+Number(I.x)),y:Math.floor(Number(e.top)+Number(I.y))}}function l(e){var i,n,t=e?r(g.iframe):{x:0,y:0};i=g,n=t;let o={x:Number(i.width)+n.x,y:Number(i.height)+n.y};R(h,`Reposition requested from iFrame (offset x:${t.x} y:${t.y})`),window.top===window.self?(I=o,c(),R(h,"--")):window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](o.x,o.y):M(h,"Unable to scroll to requested position, window.parentIFrame not found")}function c(){!1===u("onScroll",I)?S():H(h)}function m(e){const i=e.split("#")[1]||"";var e=decodeURIComponent(i);let n=document.getElementById(e)||document.getElementsByName(e)[0];n?(e=r(n),R(h,`Moving to in page link (#${i}) at x: ${e.x} y: `+e.y),I={x:e.x,y:e.y},c(),R(h,"--")):window.top===window.self?R(h,`In page link #${i} not found`):window.parentIFrame?window.parentIFrame.moveToAnchor(i):R(h,`In page link #${i} not found and window.parentIFrame not found`)}function f(e){let i={};var n;i=0===Number(g.width)&&0===Number(g.height)?{x:(n=s(9).split(":"))[1],y:n[0]}:{x:g.width,y:g.height},u(e,{iframe:g.iframe,screenX:Number(i.x),screenY:Number(i.y),type:g.type})}const u=(e,i)=>E(h,e,i);function t(){switch(x[h]?.firstRun&&x[h]&&(x[h].firstRun=!1),g.type){case"close":N(g.iframe);break;case"message":n=s(6),R(h,`onMessage passed: {iframe: ${g.iframe.id}, message: ${n}}`),u("onMessage",{iframe:g.iframe,message:JSON.parse(n)}),R(h,"--");break;case"mouseenter":f("onMouseEnter");break;case"mouseleave":f("onMouseLeave");break;case"autoResize":x[h].autoResize=JSON.parse(s(9));break;case"scrollTo":l(!1);break;case"scrollToOffset":l(!0);break;case"pageInfo":d("start",h);{const t=e=>()=>{x[o]?d(e,o):i()};function e(e,i){R(o,e+" listeners for sendPageInfo"),i(window,"scroll",t("scroll")),i(window,"resize",t("resize window"))}function i(){e("Remove ",k),r.disconnect()}const o=h,r=new ResizeObserver(t("iframe observed"));e("Add ",T),r.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),x[o]&&(x[o].stopPageInfo=i)}break;case"pageInfoStop":x[h]?.stopPageInfo&&(x[h].stopPageInfo(),delete x[h].stopPageInfo);break;case"inPageLink":m(s(9));break;case"reset":O(g);break;case"init":a(),n=h,x[n].sameDomain=!!x[n]?.iframe?.contentWindow?.iFrameResizer,R(n,"sameDomain: "+x[n].sameDomain),u("onReady",g.iframe);break;default:return 0===g.width&&0===g.height?void M(`Unsupported message received (${g.type}), this is likely due to the iframe containing a later `+"version of iframe-resizer than the parent page"):0===g.width||0===g.height?void R(h,"Ignoring message with 0 height or width"):document.hidden?void R(h,"Page hidden - ignored resize request"):void a()}var n}let o=i.data,g={},h=null;var w,p;if("[iFrameResizerChild]Ready"===o)Object.keys(x).forEach(e=>j("iFrame requested init",D(e),e));else if(z===(""+o).slice(0,$)&&o.slice($).split(":")[0]in x)if(g=(w=o.slice($).split(":"),p=w[1]?Number(w[1]):0,y=x[w[0]]?.iframe,b=getComputedStyle(y),{iframe:y,id:w[0],height:p+("border-box"!==(y=b).boxSizing?0:(y.paddingTop?parseInt(y.paddingTop,10):0)+(y.paddingBottom?parseInt(y.paddingBottom,10):0))+("border-box"!==(p=b).boxSizing?0:(p.borderTopWidth?parseInt(p.borderTopWidth,10):0)+(p.borderBottomWidth?parseInt(p.borderBottomWidth,10):0)),width:Number(w[2]),type:w[3]}),h=g.id){var b,y=h;if(!x[y])throw new Error(g.type+` No settings for ${y}. Message was: `+o);(b=g.type in{true:1,false:1,undefined:1})&&R(h,"Ignoring init message from meta parent page"),b||(R(h,"Received: "+o),x[h].loaded=!0,function(){let e=!0;return null===g.iframe&&(M(h,`The iframe (${g.id}) was not found.`),e=!1),e}()&&n()&&t())}else M("iframeResizer received messageData without id, message was: ",o);else F(h,"Ignored: "+o)}function E(e,i,n){var t=null;let o=null;if(x[e]){if("function"!=typeof(t=x[e][i]))throw new TypeError(i+` on iFrame[${e}] is not a function`);o=t(n)}return o}function u(e){e=e.id;delete x[e]}function N(e){var i=e.id;if(!1===E(i,"onClose",i))R(i,"Close iframe cancelled by onClose event");else{R(i,"Removing iFrame: "+i);try{e.parentNode&&e.remove()}catch(e){M(e)}E(i,"onClosed",i),R(i,"--"),u(e)}}function W(e){null===I&&(I={x:window.scrollX,y:window.scrollY},R(e,`Get page position: ${I.x}, `+I.y))}function S(){I=null}function H(e){null!==I&&(window.scrollTo(I.x,I.y),R(e,`Set page position: ${I.x}, `+I.y),S())}function O(e){R(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),W(e.id),C(e),j("reset","reset",e.id)}function C(n){const t=n.id;function e(e){var i=n[e]+"px";n.iframe.style[e]=i,R(t,`IFrame (${t}) ${e} set to `+i)}x[t].sizeHeight&&e("height"),x[t].sizeWidth&&e("width")}function j(n,t,o,e){function i(){if(x[o]?.postMessageTarget){var{postMessageTarget:e,targetOrigin:i}=x[o];if(x[o].sameDomain)try{return void(R(o,`[${n}] Sending message to iframe[${o}] (${t}) via sameDomain`),x[o].iframe.contentWindow.iFrameListener(z+t))}catch(e){M(o,"Same domain connection failed. Trying cross domain"),x[o].sameDomain=!1}R(o,`[${n}] Sending message to iframe[${o}] (${t}) targetOrigin: `+i),e.postMessage(z+t,i)}else M(o,`[${n}] IFrame(${o}) not found`)}function r(){e&&x[o]?.warningTimeout&&(x[o].msgTimeout=setTimeout(function(){x[o]===a||x[o].loaded||x[o].loadErrorShown||(x[o].loadErrorShown=!0,f(o,`
[31;1mNo response from iFrame[m
            
The iframe ([3m${o}[m) has not responded within ${x[o].warningTimeout/1e3} seconds. Check [1miFrameResizer.contentWindow.js[m has been loaded in the iframe.

This message can be ignored if everything is working, or you can set the [1mwarningTimeout[m option to a higher value or zero to suppress this warning.
`))},x[o].warningTimeout))}x[o]&&(i(),r())}function D(e){var i=x[e];return[e,"8",i.sizeWidth,i.log,"32",i.enablePublicMethods,i.autoResize,i.bodyMargin,i.heightCalculationMethod,i.bodyBackground,i.bodyPadding,i.tolerance,i.inPageLinks,"child",i.widthCalculationMethod,i.mouseEvents,i.offsetHeight,i.offsetWidth,i.sizeHeight].join(":")}const g=e=>!Number.isNaN(e);function r(o,i){function e(n){const t=o["id"];T(o,"load",function(){var e,i;j("iFrame.onload",n,t,!0),e=x[r]?.firstRun,i=x[r]?.heightCalculationMethod in d,!e&&i&&O({iframe:o,height:0,width:0,type:"init"})}),j("init",n,t,!0)}function n(e){if(x[r]={iframe:o,firstRun:!0,remoteHost:o?.src.split("/").slice(0,3).join("/"),...l,...function(e){if(!e)return{};if("object"!=typeof e)throw new TypeError("Options is not an object");return("sizeWidth"in e||"sizeHeight"in e)&&f(r,`
[31;1mDeprecated Optionm

The [1msizeWidth[m and [1msizeHeight[m options have been replaced with new [1mdirection[m option which expects values of [3m"vertical"[m or [3m"horizontal"[m.
`),e}(e)},"horizontal"===x[r].direction)x[r].sizeWidth=!0,x[r].sizeHeight=!1,R(r,'Direction set to "horizontal"');else if("none"===x[r].direction)x[r].sizeWidth=!1,x[r].sizeHeight=!1,R(r,'Direction set to "none"');else{if("vertical"!==x[r].direction)throw new TypeError(r,`Direction value of "${x[r].direction}" is not valid`);R(r,'Direction set to "vertical"')}null===x[r].postMessageTarget&&(x[r].postMessageTarget=o.contentWindow),x[r].targetOrigin=!0!==x[r].checkOrigin||""===(e=x[r].remoteHost)||null!==e.match(/^(about:blank|javascript:|file:\/\/)/)?"*":e}const r=function(e){if("string"!=typeof e)throw new TypeError("Invaild id for iFrame. Expected String");return""===e&&(o.id=e=function(){let e=i?.id||l.id+c++;return null!==document.getElementById(e)&&(e+=c++),e}(),m=(i||{}).log,R(e,`Added missing iframe ID: ${e} (${o.src})`)),e}(o.id);if(r in x&&"iFrameResizer"in o)M(r,"Ignored iFrame, already setup.");else{switch(n(i),R(r,`IFrame scrolling ${x[r]?.scrolling?"enabled":"disabled"} for `+r),o.style.overflow=!1===x[r]?.scrolling?"hidden":"auto",x[r]?.scrolling){case"omit":break;case!0:o.scrolling="yes";break;case!1:o.scrolling="no";break;default:o.scrolling=x[r]?x[r].scrolling:"no"}s("Height"),s("Width"),a("maxHeight"),a("minHeight"),a("maxWidth"),a("minWidth"),"number"!=typeof(t=x[r].bodyMargin)&&"0"!==t||(x[r].bodyMargin=t+"px"),e(D(r)),x[r]&&(x[r].iframe.iFrameResizer={close:N.bind(null,x[r].iframe),removeListeners:u.bind(null,x[r].iframe),resize:j.bind(null,"Window resize","resize",r),moveToAnchor(e){j("Move to anchor","moveToAnchor:"+e,r)},sendMessage(e){j("Send Message","message:"+(e=JSON.stringify(e)),r)}})}var t;function a(e){var i=x[r][e];1/0!==i&&0!==i&&(o.style[e]=g(i)?i+"px":i,R(r,`Set ${e} = `+o.style[e]))}function s(e){if(g("min"+e)&&g("max"+e)&&x[r]["min"+e]>x[r]["max"+e])throw new Error(`Value for min${e} can not be greater than max`+e)}}function e(n,t){Object.keys(x).forEach(function(e){var i;i=e,x[i]?.autoResize&&!x[i]?.firstRun&&j(n,t,e)})}function s(){!1===document.hidden&&(R("document","Trigger event: Visibility change"),e("Tab Visible","resize"))}let h=!1;function w(){function n(e,i){if(i){if(!i.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==i.tagName.toUpperCase())throw new TypeError(`Expected <IFRAME> tag, found <${i.tagName}>`);r(i,e),t.push(i)}}let t;return h||(T(window,"message",i),T(document,"visibilitychange",s),window.iFrameListener=e=>i({data:e,sameDomain:!0}),h=!0),function(e,i){switch(t=[],typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),n.bind(a,e));break;case"object":n(e,i);break;default:throw new TypeError(`Unexpected data type (${typeof i})`)}return t}}function p(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(n){return this.filter("iframe").each(function(e,i){r(i,n)}).end()}):M("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery!==a&&p(window.jQuery),"function"==typeof define&&define.amd&&define([],w),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=w()),window.iFrameResize=window.iFrameResize||w()}();
//# sourceMappingURL=iframeResizer.map