/*! iFrame Resizer (iframeSizer.min.js ) - v4.3.9 - 2024-02-10
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2024 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
!function(c){if("undefined"!=typeof window){const j="message".length,H="[iFrameSizer]",P=H.length,L=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),A={},B=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"documentElementBoundingClientRect",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:()=>!0,onClosed:function(){},onInit:!1,onMessage:null,onMouseEnter:function(){},onMouseLeave:function(){},onReady:function(e){"function"==typeof A[e.id].onInit&&(F("onInit() function is deprecated and has been replaced with onReady()"),A[e.id].onInit(e))},onResized:function(){},onScroll:()=>!0});let s=0,d=!1,r=!1,y=null,t=null;const q={};let e=!1;function v(e,n,t){e.addEventListener(n,t,!1)}function I(e,n,t){e.removeEventListener(n,t,!1)}function o(e){return H+"["+function(e){let n="Host page: "+e;return n=window.top!==window.self?window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e:n}(e)+"]"}function i(e){return A[e]?A[e].log:d}function a(e,n,t,i){!0===i&&console[e](o(n),t)}function x(e,n){a("log",e,n,i(e))}function z(e,n){a("info",e,n,i(e))}function F(e,n){a("warn",e,n,!0)}function n(e){function t(){i("Height"),i("Width"),W(function(){N(h),O(p),f("onResized",h)},h,"init")}function n(){var e=g.slice(P).split(":"),n=e[1]?parseInt(e[1],10):0,t=A[e[0]]&&A[e[0]].iframe,i=getComputedStyle(t);return{iframe:t,id:e[0],height:n+function(e){if("border-box"!==e.boxSizing)return 0;var n=e.paddingTop?parseInt(e.paddingTop,10):0,e=e.paddingBottom?parseInt(e.paddingBottom,10):0;return n+e}(i)+function(e){if("border-box"!==e.boxSizing)return 0;var n=e.borderTopWidth?parseInt(e.borderTopWidth,10):0,e=e.borderBottomWidth?parseInt(e.borderBottomWidth,10):0;return n+e}(i),width:e[2],type:e[3]}}function i(e){var n=Number(A[p]["max"+e]),t=Number(A[p]["min"+e]),e=e.toLowerCase();let i=Number(h[e]);x(p,"Checking "+e+" is in range "+t+"-"+n),i<t&&(i=t,x(p,"Set "+e+" to min value")),i>n&&(i=n,x(p,"Set "+e+" to max value")),h[e]=""+i}function o(){let t=e.origin,i=A[p]&&A[p].checkOrigin;if(i&&""+t!="null"&&!function(){if(i.constructor!==Array)return e=A[p]&&A[p].remoteHost,x(p,"Checking connection is from: "+e),t===e;{let e=0,n=!1;for(x(p,"Checking connection is from allowed list of origins: "+i);e<i.length;e++)if(i[e]===t){n=!0;break}return n}var e}())throw new Error("Unexpected message received from: "+t+" for "+h.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return 1}function a(e){return g.slice(g.indexOf(":")+j+e)}function s(t,i){var e,n,o;e=function(){var e,n;C("Send Page Info","pageInfo:"+(e=document.body.getBoundingClientRect(),n=h.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(n.top-e.top,10),offsetLeft:parseInt(n.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),t,i)},n=32,o=i,q[o]||(q[o]=setTimeout(function(){q[o]=null,e()},n))}function r(e){e=e.getBoundingClientRect();return R(p),{x:Math.floor(Number(e.left)+Number(y.x)),y:Math.floor(Number(e.top)+Number(y.y))}}function d(e){let n=e?r(h.iframe):{x:0,y:0},t={x:Number(h.width)+n.x,y:Number(h.height)+n.y};x(p,"Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top===window.self?(y=t,c(),x(p,"--")):window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](t.x,t.y):F(p,"Unable to scroll to requested position, window.parentIFrame not found")}function c(){!1===f("onScroll",y)?E():O(p)}function u(e){const n=e.split("#")[1]||"";var e=decodeURIComponent(n);let t=document.getElementById(e)||document.getElementsByName(e)[0];t?(e=r(t),x(p,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),y={x:e.x,y:e.y},c(),x(p,"--")):window.top===window.self?x(p,"In page link #"+n+" not found"):window.parentIFrame?window.parentIFrame.moveToAnchor(n):x(p,"In page link #"+n+" not found and window.parentIFrame not found")}function l(e){let n={};var t;n=0===Number(h.width)&&0===Number(h.height)?{x:(t=a(9).split(":"))[1],y:t[0]}:{x:h.width,y:h.height},f(e,{iframe:h.iframe,screenX:Number(n.x),screenY:Number(n.y),type:h.type})}function f(e,n){return M(p,e,n)}function m(){switch(A[p]&&A[p].firstRun&&A[p]&&(A[p].firstRun=!1),h.type){case"close":k(h.iframe);break;case"message":n=a(6),x(p,"onMessage passed: {iframe: "+h.iframe.id+", message: "+n+"}"),f("onMessage",{iframe:h.iframe,message:JSON.parse(n)}),x(p,"--");break;case"mouseenter":l("onMouseEnter");break;case"mouseleave":l("onMouseLeave");break;case"autoResize":A[p].autoResize=JSON.parse(a(9));break;case"scrollTo":d(!1);break;case"scrollToOffset":d(!0);break;case"pageInfo":s(A[p]&&A[p].iframe,p);{function e(n,t){function i(){A[o]?s(A[o].iframe,o):r()}["scroll","resize"].forEach(function(e){x(o,n+e+" listener for sendPageInfo"),t(window,e,i)})}function r(){e("Remove ",I)}let o=p;e("Add ",v),A[o]&&(A[o].stopPageInfo=r)}break;case"pageInfoStop":A[p]&&A[p].stopPageInfo&&(A[p].stopPageInfo(),delete A[p].stopPageInfo);break;case"inPageLink":u(a(9));break;case"reset":T(h);break;case"init":t(),f("onReady",h.iframe);break;default:0===Number(h.width)&&0===Number(h.height)?F("Unsupported message received ("+h.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):t()}var n}let g=e.data,h={},p=null;if("[iFrameResizerChild]Ready"===g)for(const b in A)C("iFrame requested init",S(b),A[b].iframe,b);else H===(""+g).slice(0,P)&&g.slice(P).split(":")[0]in A?(h=n(),p=h.id,A[p]&&(A[p].loaded=!0),(w=h.type in{true:1,false:1,undefined:1})&&x(p,"Ignoring init message from meta parent page"),!w&&function(e){let n=!0;return A[e]||(n=!1,F(h.type+" No settings for "+e+". Message was: "+g)),n}(p)&&(x(p,"Received: "+g),function(){let e=!0;return null===h.iframe&&(F(p,"IFrame ("+h.id+") not found"),e=!1),e}())&&o()&&m()):z(p,"Ignored: "+g);var w}function M(e,n,t){var i=null;let o=null;if(A[e]){if("function"!=typeof(i=A[e][n]))throw new TypeError(n+" on iFrame["+e+"] is not a function");o=i(t)}return o}function u(e){e=e.id;delete A[e]}function k(e){var n=e.id;if(!1===M(n,"onClose",n))x(n,"Close iframe cancelled by onClose event");else{x(n,"Removing iFrame: "+n);try{e.parentNode&&e.parentNode.removeChild(e)}catch(e){F(e)}M(n,"onClosed",n),x(n,"--"),u(e)}}function R(e){null===y&&x(e,"Get page position: "+(y={x:window.pageXOffset===c?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===c?document.documentElement.scrollTop:window.pageYOffset}).x+","+y.y)}function O(e){null!==y&&(window.scrollTo(y.x,y.y),x(e,"Set page position: "+y.x+","+y.y),E())}function E(){y=null}function T(e){x(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),R(e.id),W(function(){N(e),C("reset","reset",e.iframe,e.id)},e,"reset")}function N(i){function t(e){function n(){Object.keys(A).forEach(function(e){function n(e){return"0px"===(A[t]&&A[t].iframe.style[e])}var t;t=e,A[t]&&null!==A[t].iframe.offsetParent&&(n("height")||n("width"))&&C("Visibility change","resize",A[t].iframe,t)})}function t(e){x("window","Mutation observed: "+e[0].target+" "+e[0].type),m(n,16)}r||"0"!==i[e]||(r=!0,x(o,"Hidden iFrame detected, creating visibility listener"),e=document.querySelector("body"),new MutationObserver(t).observe(e,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}))}function e(e){var n;n=e,i.id?(i.iframe.style[n]=i[n]+"px",x(i.id,"IFrame ("+o+") "+n+" set to "+i[n]+"px")):x("undefined","messageData id not set"),t(e)}let o=i.iframe.id;A[o]&&(A[o].sizeHeight&&e("height"),A[o].sizeWidth)&&e("width")}function W(e,n,t){t!==n.type&&requestAnimationFrame&&!window.jasmine?(x(n.id,"Requesting animation frame"),requestAnimationFrame(e)):e()}function C(n,t,i,o,e){function r(){var e;i&&"contentWindow"in i&&null!==i.contentWindow?(e=A[o]&&A[o].targetOrigin,x(o,"["+n+"] Sending msg to iframe["+o+"] ("+t+") targetOrigin: "+e),i.contentWindow.postMessage(H+t,e)):F(o,"["+n+"] IFrame("+o+") not found")}function a(){e&&A[o]&&A[o].warningTimeout&&(A[o].msgTimeout=setTimeout(function(){!A[o]||A[o].loaded||s||(s=!0,F(o,"IFrame has not responded within "+A[o].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},A[o].warningTimeout))}let s=!1;o=o||i.id,A[o]&&(r(),a())}function S(e){var n=A[e];return[e,n.bodyMarginV1,n.sizeWidth,n.log,n.interval,n.enablePublicMethods,n.autoResize,n.bodyMargin,n.heightCalculationMethod,n.bodyBackground,n.bodyPadding,n.tolerance,n.inPageLinks,n.resizeFrom,n.widthCalculationMethod,n.mouseEvents].join(":")}function l(e){return!Number.isNaN(e)}function f(i,n){function e(t){var e;e=MutationObserver,i.parentNode&&new e(function(e){e.forEach(function(e){Array.prototype.slice.call(e.removedNodes).forEach(function(e){e===i&&k(i)})})}).observe(i.parentNode,{childList:!0}),v(i,"load",function(){var e,n;C("iFrame.onload",t,i,c,!0),e=A[o]&&A[o].firstRun,n=A[o]&&A[o].heightCalculationMethod in L,!e&&n&&T({iframe:i,height:0,width:0,type:"init"})}),C("init",t,i,c,!0)}function t(e){if(e=e||{},A[o]=Object.create(null),A[o].iframe=i,A[o].firstRun=!0,A[o].remoteHost=i.src&&i.src.split("/").slice(0,3).join("/"),"object"!=typeof e)throw new TypeError("Options is not an object");var n=e;for(const t in B)Object.prototype.hasOwnProperty.call(B,t)&&(A[o][t]=(Object.prototype.hasOwnProperty.call(n,t)?n:B)[t]);A[o]&&(A[o].targetOrigin=!0!==A[o].checkOrigin||""===(e=A[o].remoteHost)||null!==e.match(/^(about:blank|javascript:|file:\/\/)/)?"*":e)}let o=function(e){if("string"!=typeof e)throw new TypeError("Invaild id for iFrame. Expected String");return""===e&&(i.id=e=function(){let e=n&&n.id||B.id+s++;return null!==document.getElementById(e)&&(e+=s++),e}(),d=(n||{}).log,x(e,"Added missing iframe ID: "+e+" ("+i.src+")")),e}(i.id);if(o in A&&"iFrameResizer"in i)F(o,"Ignored iFrame, already setup.");else{switch(t(n),x(o,"IFrame scrolling "+(A[o]&&A[o].scrolling?"enabled":"disabled")+" for "+o),i.style.overflow=!1===(A[o]&&A[o].scrolling)?"hidden":"auto",A[o]&&A[o].scrolling){case"omit":break;case!0:i.scrolling="yes";break;case!1:i.scrolling="no";break;default:i.scrolling=A[o]?A[o].scrolling:"no"}a("Height"),a("Width"),r("maxHeight"),r("minHeight"),r("maxWidth"),r("minWidth"),"number"!=typeof(A[o]&&A[o].bodyMargin)&&"0"!==(A[o]&&A[o].bodyMargin)||(A[o].bodyMarginV1=A[o].bodyMargin,A[o].bodyMargin=A[o].bodyMargin+"px"),e(S(o)),A[o]&&(A[o].iframe.iFrameResizer={close:k.bind(null,A[o].iframe),removeListeners:u.bind(null,A[o].iframe),resize:C.bind(null,"Window resize","resize",A[o].iframe),moveToAnchor:function(e){C("Move to anchor","moveToAnchor:"+e,A[o].iframe,o)},sendMessage:function(e){C("Send Message","message:"+(e=JSON.stringify(e)),A[o].iframe,o)}})}function r(e){var n=A[o][e];1/0!==n&&0!==n&&(i.style[e]=l(n)?n+"px":n,x(o,"Set "+e+" = "+i.style[e]))}function a(e){if(l("min"+e)&&l("max"+e)&&A[o]["min"+e]>A[o]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}}function m(e,n){null===t&&(t=setTimeout(function(){t=null,e()},n))}function g(){"hidden"!==document.visibilityState&&(x("document","Trigger event: Visibility change"),m(function(){h("Tab Visible","resize")},16))}function h(t,i){Object.keys(A).forEach(function(e){var n;n=e,A[n]&&"parent"===A[n].resizeFrom&&A[n].autoResize&&!A[n].firstRun&&C(t,i,A[e].iframe,e)})}function p(){v(window,"message",n),v(document,"visibilitychange",g),v(document,"-webkit-visibilitychange",g),v(window,"resize",function(){var e;x("window","Trigger event: "+(e="resize")),m(function(){h("Window "+e,"resize")},16)})}function w(){function t(e,n){if(n){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">");f(n,e),i.push(n)}}let i;return e||(p(),e=!0),function(e,n){switch(i=[],typeof n){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(n||"iframe"),t.bind(c,e));break;case"object":t(e,n);break;default:throw new TypeError("Unexpected data type ("+typeof n+")")}return i}}function b(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(t){return this.filter("iframe").each(function(e,n){f(n,t)}).end()}):z("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery!==c&&b(window.jQuery),"function"==typeof define&&define.amd&&define([],w),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=w()),window.iFrameResize=window.iFrameResize||w()}}();
//# sourceMappingURL=iframeResizer.map