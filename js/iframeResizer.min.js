!function(e){if("undefined"==typeof window)return;const n=7,i="[iFrameSizer]",t=i.length,o=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),r={},a=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyPadding:null,checkOrigin:!0,direction:"vertical",inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"auto",id:"iFrameResizer",log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,offsetHeight:0,offsetWidth:0,postMessageTarget:null,sameDomain:!1,scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"auto",onClose:()=>!0,onClosed(){},onInit:!1,onMessage:null,onMouseEnter(){},onMouseLeave(){},onReady(e){"function"==typeof r[e.id].onInit&&(p(e.id,"\n[31;1mDeprecated Option[m\n\nThe [1monInit()[m function is deprecated and has been replaced with [1monReady()[m. It will be removed in a future version of iFrame Resizer.\n        "),r[e.id].onInit(e))},onResized(){},onScroll:()=>!0});let s=0,d=!1,c=null;const l=(e,n,i)=>e.addEventListener(n,i,!1),m=(e,n,i)=>e.removeEventListener(n,i,!1);const u=e=>`${i}[${function(e){return window.top===window.self?`Host page: ${e}`:window?.parentIFrame?.getId?`${window.parentIFrame.getId()}: ${e}`:`Nested host page: ${e}`}(e)}]`,f=(e,n,...i)=>console[e](u(n),...i),g=(e,...n)=>!0===(e=>r[e]?r[e].log:d)(e)?f("log",e,...n):null,h=(e,...n)=>f("info",e,...n),w=(e,...n)=>f("warn",e,...n),p=(e,n)=>window.console&&console.warn(((e,...n)=>[`${i}[${e}]`,...n].join(" "))(e,window.chrome?n:n.replaceAll(/\u001B\[[\d;]*m/gi,"")));function b(e){function o(){d("Height"),d("Width"),T(W),I(S),E("onResized",W)}function a(e){if("border-box"!==e.boxSizing)return 0;return(e.paddingTop?parseInt(e.paddingTop,10):0)+(e.paddingBottom?parseInt(e.paddingBottom,10):0)}function s(e){if("border-box"!==e.boxSizing)return 0;return(e.borderTopWidth?parseInt(e.borderTopWidth,10):0)+(e.borderBottomWidth?parseInt(e.borderBottomWidth,10):0)}function d(e){const n=Number(r[S][`max${e}`]),i=Number(r[S][`min${e}`]),t=e.toLowerCase();let o=Number(W[t]);g(S,`Checking ${t} is in range ${i}-${n}`),o<i&&(o=i,g(S,`Set ${t} to min value`)),o>n&&(o=n,g(S,`Set ${t} to max value`)),W[t]=`${o}`}function u(e){return N.slice(N.indexOf(":")+n+e)}const f=(e,n)=>{const i={};var t,o;t=function(){k(`Send Page Info (${e})`,`pageInfo:${function(){const e=document.body.getBoundingClientRect(),n=W.iframe.getBoundingClientRect(),{scrollY:i,scrollX:t}=window,{scrollWidth:o,scrollHeight:r}=document.documentElement;return JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,offsetTop:Math.floor(n.top-e.top),offsetLeft:Math.floor(n.left-e.left),scrollHeight:r,scrollWidth:o,scrollX:t,scrollY:i,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}()}`,n)},i[o=n]||(t(),i[o]=requestAnimationFrame((()=>{i[o]=null})))};function p(e){const n=e.getBoundingClientRect();return z(S),{x:Math.floor(Number(n.left)+Number(c.x)),y:Math.floor(Number(n.top)+Number(c.y))}}function b(e){const n=e?p(W.iframe):{x:0,y:0};let i=((e,n)=>({x:Number(e.width)+n.x,y:Number(e.height)+n.y}))(W,n);g(S,`Reposition requested from iFrame (offset x:${n.x} y:${n.y})`),window.top===window.self?(c=i,$(),g(S,"--")):window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](i.x,i.y):w(S,"Unable to scroll to requested position, window.parentIFrame not found")}function $(){!1!==E("onScroll",c)?I(S):x()}function M(e){let n={};if(0===Number(W.width)&&0===Number(W.height)){const e=u(9).split(":");n={x:e[1],y:e[0]}}else n={x:W.width,y:W.height};E(e,{iframe:W.iframe,screenX:Number(n.x),screenY:Number(n.y),type:W.type})}const E=(e,n)=>y(S,e,n);let N=e.data,W={},S=null;"[iFrameResizerChild]Ready"!==N?i===`${N}`.slice(0,t)&&N.slice(t).split(":")[0]in r?(W=function(){const e=N.slice(t).split(":"),n=e[1]?Number(e[1]):0,i=r[e[0]]?.iframe,o=getComputedStyle(i);return{iframe:i,id:e[0],height:n+a(o)+s(o),width:Number(e[2]),type:e[3]}}(),S=W.id,S?(function(e){if(!r[e])throw new Error(`${W.type} No settings for ${e}. Message was: ${N}`)}(S),function(){const e=W.type in{true:1,false:1,undefined:1};return e&&g(S,"Ignoring init message from meta parent page"),e}()||(g(S,`Received: ${N}`),r[S].loaded=!0,function(){let e=!0;return null===W.iframe&&(w(S,`The iframe (${W.id}) was not found.`),e=!1),e}()&&function(){const{origin:n,sameDomain:i}=e;if(i)return!0;let t=r[S]?.checkOrigin;if(t&&"null"!=`${n}`&&!(t.constructor===Array?function(){let e=0,i=!1;for(g(S,`Checking connection is from allowed list of origins: ${t}`);e<t.length;e++)if(t[e]===n){i=!0;break}return i}():function(){const e=r[S]?.remoteHost;return g(S,`Checking connection is from: ${e}`),n===e}()))throw new Error(`Unexpected message received from: ${n} for ${W.iframe.id}. Message was: ${e.data}. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.`);return!0}()&&function(){switch(r[S]?.firstRun&&r[S]&&(r[S].firstRun=!1),W.type){case"close":v(W.iframe);break;case"message":n=u(6),g(S,`onMessage passed: {iframe: ${W.iframe.id}, message: ${n}}`),E("onMessage",{iframe:W.iframe,message:JSON.parse(n)}),g(S,"--");break;case"mouseenter":M("onMouseEnter");break;case"mouseleave":M("onMouseLeave");break;case"autoResize":r[S].autoResize=JSON.parse(u(9));break;case"scrollTo":b(!1);break;case"scrollToOffset":b(!0);break;case"pageInfo":f("start",S),function(){const e=e=>()=>{r[t]?f(e,t):i()};function n(n,i){g(t,`${n} listeners for sendPageInfo`),i(window,"scroll",e("scroll")),i(window,"resize",e("resize window"))}function i(){n("Remove ",m),o.disconnect()}const t=S,o=new ResizeObserver(e("iframe observed"));n("Add ",l),o.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),r[t]&&(r[t].stopPageInfo=i)}();break;case"pageInfoStop":r[S]?.stopPageInfo&&(r[S].stopPageInfo(),delete r[S].stopPageInfo);break;case"inPageLink":!function(e){const n=e.split("#")[1]||"",i=decodeURIComponent(n);let t=document.getElementById(i)||document.getElementsByName(i)[0];t?function(){const e=p(t);g(S,`Moving to in page link (#${n}) at x: ${e.x} y: ${e.y}`),c={x:e.x,y:e.y},$(),g(S,"--")}():window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(n):g(S,`In page link #${n} not found and window.parentIFrame not found`):g(S,`In page link #${n} not found`)}(u(9));break;case"reset":R(W);break;case"init":o(),r[e=S].sameDomain=!!r[e]?.iframe?.contentWindow?.iFrameResizer,g(e,`sameDomain: ${r[e].sameDomain}`),E("onReady",W.iframe);break;default:if(0===W.width&&0===W.height)return void w(`Unsupported message received (${W.type}), this is likely due to the iframe containing a later version of iframe-resizer than the parent page`);if(0===W.width||0===W.height)return void g(S,"Ignoring message with 0 height or width");if(document.hidden)return void g(S,"Page hidden - ignored resize request");o()}var e,n}())):w("iframeResizer received messageData without id, message was: ",N)):h(S,`Ignored: ${N}`):Object.keys(r).forEach((e=>k("iFrame requested init",F(e),e)))}function y(e,n,i){let t=null,o=null;if(r[e]){if(t=r[e][n],"function"!=typeof t)throw new TypeError(`${n} on iFrame[${e}] is not a function`);o=t(i)}return o}function $(e){const n=e.id;delete r[n]}function v(e){const n=e.id;if(!1!==y(n,"onClose",n)){g(n,`Removing iFrame: ${n}`);try{e.parentNode&&e.remove()}catch(e){w(e)}y(n,"onClosed",n),g(n,"--"),$(e)}else g(n,"Close iframe cancelled by onClose event")}function z(e){null===c&&(c={x:window.scrollX,y:window.scrollY},g(e,`Get page position: ${c.x}, ${c.y}`))}function x(){c=null}function I(e){null!==c&&(window.scrollTo(c.x,c.y),g(e,`Set page position: ${c.x}, ${c.y}`),x())}function R(e){g(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),z(e.id),T(e),k("reset","reset",e.id)}function T(e){const n=e.id;function i(i){const t=`${e[i]}px`;e.iframe.style[i]=t,g(n,`IFrame (${n}) ${i} set to ${t}`)}r[n].sizeHeight&&i("height"),r[n].sizeWidth&&i("width")}function k(n,t,o,a){r[o]&&(r[o]?.postMessageTarget?function(){const{postMessageTarget:e,targetOrigin:a}=r[o];if(r[o].sameDomain)try{return g(o,`[${n}] Sending message to iframe[${o}] (${t}) via sameDomain`),void r[o].iframe.contentWindow.iFrameListener(i+t)}catch(e){w(o,"Same domain connection failed. Trying cross domain"),r[o].sameDomain=!1}g(o,`[${n}] Sending message to iframe[${o}] (${t}) targetOrigin: ${a}`),e.postMessage(i+t,a)}():w(o,`[${n}] IFrame(${o}) not found`),a&&r[o]?.warningTimeout&&(r[o].msgTimeout=setTimeout((function(){r[o]!==e&&(r[o].loaded||r[o].loadErrorShown||(r[o].loadErrorShown=!0,p(o,`\n[31;1mNo response from iFrame[m\n            \nThe iframe ([3m${o}[m) has not responded within ${r[o].warningTimeout/1e3} seconds. Check [1miFrameResizer.contentWindow.js[m has been loaded in the iframe.\n\nThis message can be ignored if everything is working, or you can set the [1mwarningTimeout[m option to a higher value or zero to suppress this warning.\n`)))}),r[o].warningTimeout)))}function F(e){const n=r[e];return[e,"8",n.sizeWidth,n.log,"32",n.enablePublicMethods,n.autoResize,n.bodyMargin,n.heightCalculationMethod,n.bodyBackground,n.bodyPadding,n.tolerance,n.inPageLinks,"child",n.widthCalculationMethod,n.mouseEvents,n.offsetHeight,n.offsetWidth,n.sizeHeight].join(":")}const M=e=>!Number.isNaN(e);function E(e,n){function i(e){if(!e)return{};if("object"!=typeof e)throw new TypeError("Options is not an object");return("sizeWidth"in e||"sizeHeight"in e||"autoResize"in e)&&p(t,'\n[31;1mDeprecated Optionm\n\nThe [1msizeWidth[m, [1msizeHeight[m and [1mautoResize[m options have been replaced with new [1mdirection[m option which expects values of [3m"vertical"[m, [3m"horizontal"[m or [3m"horizontal"[m.\n'),e}const t=function(i){if("string"!=typeof i)throw new TypeError("Invaild id for iFrame. Expected String");return""===i&&(e.id=i=function(){let e=n?.id||a.id+s++;return null!==document.getElementById(e)&&(e+=s++),e}(),d=(n||{}).log,g(i,`Added missing iframe ID: ${i} (${e.src})`)),i}(e.id);t in r&&"iFrameResizer"in e?w(t,"Ignored iFrame, already setup."):(!function(n){var o;r[t]={iframe:e,firstRun:!0,remoteHost:e?.src.split("/").slice(0,3).join("/"),...a,...i(n)},function(){if("horizontal"===r[t].direction)return r[t].sizeWidth=!0,r[t].sizeHeight=!1,void g(t,'Direction set to "horizontal"');if("none"===r[t].direction)return r[t].sizeWidth=!1,r[t].sizeHeight=!1,r[t].autoResize=!1,void g(t,'Direction set to "none"');if("vertical"!==r[t].direction)throw new TypeError(t,`Direction value of "${r[t].direction}" is not valid`);g(t,'Direction set to "vertical"')}(),null===r[t].postMessageTarget&&(r[t].postMessageTarget=e.contentWindow),r[t].targetOrigin=!0===r[t].checkOrigin?""===(o=r[t].remoteHost)||null!==o.match(/^(about:blank|javascript:|file:\/\/)/)?"*":o:"*"}(n),function(){switch(g(t,`IFrame scrolling ${r[t]?.scrolling?"enabled":"disabled"} for ${t}`),e.style.overflow=!1===r[t]?.scrolling?"hidden":"auto",r[t]?.scrolling){case"omit":break;case!0:e.scrolling="yes";break;case!1:e.scrolling="no";break;default:e.scrolling=r[t]?r[t].scrolling:"no"}}(),function(){function n(n){const i=r[t][n];1/0!==i&&0!==i&&(e.style[n]=M(i)?`${i}px`:i,g(t,`Set ${n} = ${e.style[n]}`))}function i(e){if(M(`min${e}`)&&M(`max${e}`)&&r[t][`min${e}`]>r[t][`max${e}`])throw new Error(`Value for min${e} can not be greater than max${e}`)}i("Height"),i("Width"),n("maxHeight"),n("minHeight"),n("maxWidth"),n("minWidth")}(),function(){const{bodyMargin:e}=r[t];"number"!=typeof e&&"0"!==e||(r[t].bodyMargin=`${e}px`)}(),function(n){const{id:i}=e;l(e,"load",(function(){k("iFrame.onload",n,i,!0),function(){const n=r[t]?.firstRun,i=r[t]?.heightCalculationMethod in o;!n&&i&&R({iframe:e,height:0,width:0,type:"init"})}()})),k("init",n,i,!0)}(F(t)),r[t]&&(r[t].iframe.iFrameResizer={close:v.bind(null,r[t].iframe),removeListeners:$.bind(null,r[t].iframe),resize:k.bind(null,"Window resize","resize",t),moveToAnchor(e){k("Move to anchor",`moveToAnchor:${e}`,t)},sendMessage(e){k("Send Message",`message:${e=JSON.stringify(e)}`,t)}}))}function N(){!1===document.hidden&&(g("document","Trigger event: Visibility change"),function(e,n){const i=e=>r[e]?.autoResize&&!r[e]?.firstRun;Object.keys(r).forEach((function(t){i(t)&&k(e,n,t)}))}("Tab Visible","resize"))}let W=!1;function S(){function n(e,n){n&&(!function(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError(`Expected <IFRAME> tag, found <${n.tagName}>`)}(),E(n,e),i.push(n))}let i;return W||(l(window,"message",b),l(document,"visibilitychange",N),window.iFrameListener=e=>b({data:e,sameDomain:!0}),W=!0),function(t,o){switch(i=[],typeof o){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(o||"iframe"),n.bind(e,t));break;case"object":n(t,o);break;default:throw new TypeError(`Unexpected data type (${typeof o})`)}return i}}var H;window.jQuery!==e&&((H=window.jQuery).fn?H.fn.iFrameResize||(H.fn.iFrameResize=function(e){return this.filter("iframe").each((function(n,i){E(i,e)})).end()}):w("","Unable to bind to jQuery, it is not fully loaded.")),"function"==typeof define&&define.amd&&define([],S),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=S()),window.iFrameResize=window.iFrameResize||S()}();
//# sourceMappingURL=iframeResizer.min.js.map
